[tox]
env_list = unit, e2e
isolated_build = false

[testenv]
passenv = BASE_URL PIHEALTH_USER PIHEALTH_PASSWORD PORT
deps =
    -r requirements.txt
    -r tests/requirements.txt

[testenv:unit]
commands =
    pytest tests/ -v -m "not e2e"

[testenv:e2e]
allowlist_externals = playwright
commands =
    playwright install chromium
    pytest -m e2e tests/e2e -v

[testenv:all]
allowlist_externals = playwright bash
commands =
    pytest tests/ -v -m "not e2e"
    playwright install chromium
    bash scripts/run-e2e.sh
